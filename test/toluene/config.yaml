# ============================================================
# Iterative Boltzmann Inversion (IBI) Configuration
# ============================================================

# ------------------------------
# General settings
# ------------------------------
n_cpus: 8                     # Number of CPUs to use; comment out to use all CPUs assigned by SLURM
init_str: "tmp.data"          # Initial LAMMPS data file
lmp_input: "in.lmp"           # LAMMPS input script
run_lammps_command: "mpirun -n 8 lmp_mpi"   # Command used to launch LAMMPS
n_iter: 100                   # Total number of IBI iterations
temp: 300                     # Simulation temperature (K)

# ------------------------------
# Density / pressure targets
# ------------------------------
density_ref: 0.8635989985280288   # Target mass density (g/cm^3)
target: "density"                 # Optimization target: "density" or "pressure"

density_correction: True          # Enable iterative density correction (iLC/iLS)
density_correction_freq: 1        # Apply density correction every N iterations

PM: "rscale"                      # Pressure-matching method: "rscale" (iRT) or "linear" (iLS)
gamma: 0.1                        # Learning rate for PM = rscale (alpha_iRT)
A: 0.001                          # Learning rate for PM = linear (alpha_iLS)
LC_rcut: 0                        # Inner cutoff for linear correction; 0 disables the cutoff

# ------------------------------
# RDF settings
# ------------------------------
pair_types: ["11"]                # Pair types to optimize (e.g., ["11", "12", "22"])
RDF_cutoff: 25                    # RDF cutoff radius (Å)
RDF_delta_r: 0.01                 # RDF bin width (Å)
RDF_ref: "./pdf.txt"              # Reference RDF file (1 + N columns in the order of pair_types)
RDF_type: 1                       # 0: include all, 1: exclude bonded pairs, 2: exclude intra-molecular pairs
alpha: -0.0002                    # RDF learning rate (IBI update coefficient)

use_existing_FF: False            # Provide path to an existing nonbonded force-field file, or False
lj_params:                        # Initial LJ parameters if use_existing_FF = False
  - [0.01, 0.10, 7.0, 4]          # epsilon0, epsilon1, theta0, inner_cutoff

use_weight: "LD"                  # Optional r-dependent weighting: None, "LD", "r-1", or a file path with first column as r values and rest columns as weights
# if a defined weighting has zero regions at the tail, the potential will be shifted according to the last non-zero weight point

# ------------------------------
# Bonded interactions
# ------------------------------
bond_types: []                    # Bond types to optimize (e.g., ["1"])
bond_ref: "./bl.txt"              # Reference bond-length distribution
alpha_bond: -0.002                # Bond learning rate
use_existing_bondFF: "pot_AA.table"    # Use an existing bond FF, or False
bond_params:
  - [1, 6]                        # Initial bond parameters: k, r0 (LAMMPS units)
smooth_bond: True                 # Smooth the bond potential after each update

# ------------------------------
# Angle interactions
# ------------------------------
angle_types: []                   # Angle types to optimize (e.g., ["1"])
angle_ref: "./angle.txt"          # Reference angle distribution
alpha_angle: -0.001               # Angle learning rate
use_existing_angleFF: "pot_AA.table"    # Use an existing angle FF, or False
smooth_angle: True                # Smooth the angle potential after each update

# ------------------------------
# Learning rate scheduling
# ------------------------------
is_lr_decay: False                # Enable learning-rate decay
decay_freq: 10                    # Decay every N iterations
decay_rate: 0.8                   # Multiplicative decay factor
min_alpha: -1e-5                  # Minimum allowed learning rate

# ------------------------------
# Potential smoothing
# ------------------------------
smooth_method: "gaussian"         # Smoothing method ("gaussian")
smooth_freq: 1                    # Apply smoothing every N iterations
smooth_sigma: 3                   # Width parameter for Gaussian smoothing
